To configure users, groups or machines in Active Directory, we need to log in to the Domain Controller and run "Active Directory Users and Computers" from the start menu:

![[Pasted image 20240911165728.png]]

This will open up a window where you can see the hierarchy of users, computers and groups that exist in the domain. These objects are organized in **Organizational Units (OUs)** which are container objects that allow you to classify users and machines. **OUs** are mainly used to define sets of users with similar policing requirements. The people in the Sales department of your organisation are likely to have a different set of policies applied than the people in IT, for example. Keep in mind that a user can only be a part of a single OU at a time.

Checking our machine, we can see that there is already an **OU** called `THM` with four child OUs for the IT, Management, Marketing and Sales departments. It is very typical to see the OUs mimic the business' structure, as it allows for efficiently deploying baseline policies that apply to entire departments. Remember that while this would be the expected model most of the time, you can define **OUs** arbitrarily.
		![[Pasted image 20240911165925.png]]

If you open any **OUs**, you can see the users they contain and perform simple tasks like creating, deleting or modifying them as needed. You can also reset passwords if needed (pretty useful for the helpdesk):
		![[Pasted image 20240911170025.png]]
These containers are created by Windows automatically and contain the following:
- **Built-in:** Contains default groups available to any Windows host.
- **Computers:** Any machine joining the network will be put here by default. You can move them if needed.
- **Domain Controllers:** Default OU that contains the DCs in your network.
- **Users:** Default users and groups that apply to a domain-wide context.
- **Managed Service Accounts:** Holds accounts used by services in your Windows domain.

### Security Groups vs OUs
You are probably wondering why we have both **groups** and **OUs**. While both are used to classify users and computers, their purposes are entirely different:
- ==OUs== are handy for ==**applying policies**== to users and computers, which include specific configurations that pertain to sets of users depending on their particular role in the enterprise. 
	  **Remember**: a user can only be a member of a single **OU** at a time, as it wouldn't make sense to try to apply two different sets of policies to a single user.
- ==Security Groups==, are used to ==**grant permissions over resources**==.For example, you will use groups if you want to allow some users to access a shared folder or network printer. A user can be a part of many groups, which is needed to grant access to multiple resources.


# Managing Users & Computers
## Users
Your first task as the new domain administrator is to check the existing *AD* **OUs** and users, as some recent changes have happened to the business. You have been given the following organisational chart and are expected to make changes to the AD to match it:
		![[Pasted image 20240911170909.png]]

### Deleting extra OUs and users
The first thing you should notice is that there is an additional department OU in your current AD configuration that doesn't appear in the chart. We've been told it was closed due to budget cuts and should be removed from the domain. If you try to right-click and delete the OU, you will get the following error:
			![[Pasted image 20240911170938.png]]
By default, OUs are protected against accidental deletion. To delete the OU, we need to enable the **Advanced Features** in the View menu:
		![[Pasted image 20240911171002.png]]
This will show you some additional containers and enable you to disable the accidental deletion protection. To do so, right-click the OU and go to Properties. You will find a checkbox in the Object tab to disable the protection:
		![[Pasted image 20240911171021.png]]
Note:
	After deleting the extra OU, you should notice that for some of the departments, the users in the AD don't match the ones in our organisational chart. Create and delete users as needed to match them.

### Delegation
One of the nice things you can do in AD is to give specific users some control over some OUs. This process is known as **delegation** and allows you to grant users specific privileges to perform advanced tasks on OUs without needing a Domain Administrator to step in.

One of the most common use cases for this is granting `IT support` the privileges to reset other low-privilege users' passwords. According to our organisational chart, Phillip is in charge of IT support, so we'd probably want to delegate the control of resetting passwords over the Sales, Marketing and Management OUs to him.

For this example, we will delegate control over the Sales OU to Phillip. To delegate control over an OU, you can right-click it and select **Delegate Control**:
			![[Pasted image 20240911171436.png]]
**Note:** 
	To avoid mistyping the user's name, write "phillip" and click the **Check Names** button. Windows will autocomplete the user for you.
	![[Pasted image 20240911171601.png]]
![[Pasted image 20240911171715.png]]

While you may be tempted to go to **Active Directory Users and Computers** to try and test Phillip's new powers, he doesn't really have the privileges to open it, so you'll have to use other methods to do password resets. In this case, we will be using Powershell to do so:
		![[Pasted image 20240911173704.png]]
```shell-session
PS C:\Users\phillip> Set-ADAccountPassword {sophie} -Reset -NewPassword (Read-Host -AsSecureString -Prompt 'New Password') -Verbose

New Password: *********

VERBOSE: Performing the operation "Set-ADAccountPassword" on target "CN=Sophie,OU=Sales,OU=THM,DC=thm,DC=local".
```

Since we wouldn't want Sophie to keep on using a password we know, we can also force a password reset at the next logon with the following command:
```shell-session
PS C:\Users\phillip> Set-ADUser -ChangePasswordAtLogon $true -Identity {sophie} -Verbose

VERBOSE: Performing the operation "Set" on target "CN=Sophie,OU=Sales,OU=THM,DC=thm,DC=local".
```

![[Pasted image 20240911173738.png]]

## Computers 
By default, all the machines that join a domain (except for the DCs) will be put in the container called "Computers". If we check our DC, we will see that some devices are already there:
		![[Pasted image 20240911173951.png]]
We can see some servers, some laptops and some PCs corresponding to the users in our network. Having all of our devices there is not the best idea since it's very likely that you want different policies for your servers and the machines that regular users use on a daily basis.

While there is no golden rule on how to organise your machines, an excellent starting point is segregating devices according to their use. In general, you'd expect to see devices divided into at least the three following categories:

### 1. Workstations
Workstations are one of the most common devices within an Active Directory domain. Each user in the domain will likely be logging into a workstation. This is the device they will use to do their work or normal browsing activities. These devices should never have a privileged user signed into them.

### 2. Servers
Servers are the second most common device within an Active Directory domain. Servers are generally used to provide services to users or other servers

### 3. Domain Controllers
Domain Controllers are the third most common device within an Active Directory domain. Domain Controllers allow you to manage the Active Directory Domain. These devices are often deemed the most sensitive devices within the network as they **contain hashed passwords for all user accounts within the environment**.

Since we are tidying up our AD, let's create two separate **OUs** for `Workstations` and `Servers` (Domain Controllers are already in an OU created by Windows). 
		![[Pasted image 20240911174213.png]]

